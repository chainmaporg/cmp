<div class="login-panel">
    <section class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="page-content">
                    <h2>Login</h2>
                    <div class="form-style form-style-3">
                        <form>
                            <div class="form-inputs clearfix">
                                <p class="login-text">
                                    <input type="text" value="Username" onfocus="if (this.value == 'Username') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Username';}">
                                    <i class="icon-user"></i>
                                </p>
                                <p class="login-password">
                                    <input type="password" value="Password" onfocus="if (this.value == 'Password') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Password';}">
                                    <i class="icon-lock"></i>
                                    <!-- <a href="#">Forget</a> -->
                                </p>
                            </div>
                            <p class="form-submit login-submit">
                                <input type="submit" value="Log in" class="button color small login-submit submit">
                            </p>
                            <div class="rememberme">
                                <label>
                                    <input type="checkbox" checked="checked"> Remember Me</label>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- End page-content -->
            </div>
            <!-- End col-md-6 -->
            <div class="col-md-6">
                <div class="page-content Register">
                    <h2>Register Now</h2>
                    <p></p>
                    <a class="button color small signup">Create an account</a>
                </div>
                <!-- End page-content -->
            </div>
            <!-- End col-md-6 -->
        </div>
    </section>
</div>
<!-- End login-panel -->

<div class="panel-pop" id="signup">
    <h2>Register Now
        <i class="icon-remove"></i>
    </h2>
    <div class="form-style form-style-3">
        <form action="javascript:">
            <div class="form-inputs clearfix">
                <!-- <p>
                    <label class="required">Select an Employer from the dropdown or create your own company
                        <span>*</span>
                    </label>
                    <label class="radio-inline" style="display: inline-block">
                        <input type="radio" name="mode" value="select" onclick="selectMode('select')" checked>Select an Employer</label>
                    <label class="radio-inline" style="display: inline-block">
                        <input type="radio" name="mode" value="create" onclick="selectMode('create')">Create Company</label>

                </p> -->
                <!-- <div class="employerFields">
                    <p>
                        <label class="required">Select Employer
                            <span>*</span>
                        </label>
                        <span class="styled-select">
                            <select required id="employer" name="company_id" required>
                                <option value="">Please select an Employer</option>

                            </select>
                        </span>
                    </p>
                </div> -->
                <!-- <div class="companyFields" style="display: none">
                    <p>
                        <label class="required">Company Name
                            <span>*</span>
                        </label>
                        <input type="text" name="company_name" required id="companyName">
                    </p>
                    <p>
                        <label class="required">Company Information
                            <span>*</span>
                        </label>
                        <input type="text" name="company_info" required id="companyInfo">
                    </p>
                    <p>
                        <label class="required">Company Email
                            <span>*</span>
                        </label>
                        <input type="email" name="company_email" required id="companyEmail">
                    </p>
                    <p>
                        <label class="required">Company Phone
                            <span>*</span>
                        </label>
                        <input type="text" name="company_phone" required id="companyPhone">
                    </p>
                    <p>
                        <label class="required">Company Website
                            <span>*</span>
                        </label>
                        <input type="text" name="company_site" required id="companyweb">
                    </p>
                </div> -->

                <!-- <p>
                    <label class="required">First Name
                        <span>*</span>
                    </label>
                    <input type="text" name="firstname" id="firstName" required>
                </p> -->
                <!-- <p>
                    <label class="required">Last Name
                        <span>*</span>
                    </label>
                    <input type="text" name="lastname" id="lastName" required>
                </p> -->
                <p>
                    <label class="required">User Name
                        <span>*</span>
                    </label>
                    <input type="text" name="user_name" id="userName" required>
                </p>
                <p>
                    <label class="required">User Email
                        <span>*</span>
                    </label>
                    <input type="email" name="user_email" id="userEmail" required>
                </p>
                <p>
                    <label class="required">User Password
                        <span>*</span>
                    </label>
                    <input type="password" name="password" id="userPasswd" required>
                </p>
                <p>
                    <label class="required">Confirm Password
                        <span>*</span>
                    </label>
                    <input type="password" name="confirmPassword" id="confirmPassword" required>
                </p>
                <!-- <p>
                    <label class="required">User Wallet Address (e.g. n1GvvvstiCXUKBaeYniqRGeoAdMkMHoipvc):
                    </label>
                    <input type="text" name="payment_address" id="userPAddress">
                </p> -->
            </div>
            <p class="form-submit">
                <input type="submit" value="Signup" class="button color small submit" onclick="getvaluesToRegisterUser()">
            </p>
        </form>
    </div>
</div>
<!-- End signup -->

<div class="panel-pop" id="lost-password">
    <h2>Lost Password
        <i class="icon-remove"></i>
    </h2>
    <div class="form-style form-style-3">
        <p>Lost your password? Please enter your username and email address. You will receive a link to create a new password
            via email.</p>
        <form>
            <div class="form-inputs clearfix">
                <p>
                    <label class="required">Username
                        <span>*</span>
                    </label>
                    <input type="text">
                </p>
                <p>
                    <label class="required">E-Mail
                        <span>*</span>
                    </label>
                    <input type="email">
                </p>
            </div>
            <p class="form-submit">
                <input type="submit" value="Reset" class="button color small submit">
            </p>
        </form>
        <div class="clearfix"></div>
    </div>
</div>

<!-- this block was previous used to update payment address. But currently we are using it to update the whole user profile,
not only the payment address. So please don't get confused with the naming. To save time, we did not change the name of the funcitons and 
the html attributes. -->
<div class="panel-pop" id="edit-paymentAddress">
    <h2>Update Profile
        <i class="icon-remove"></i>
    </h2>
    <div class="form-style form-style-3">

        <form action="/updateUserProfile" method="POST" onsubmit="return checkPaymentAddress(this)" id="updateUserProfileProfileForm">
            <div class="form-inputs clearfix">
                <p>
                    Please select your topic interest and proficieny level on that topic. This will be helpful for us to recommend our courses
                    for you.
                </p>
                <div id="profile_interest">



                </div>
                <p>
                    <label class="required">Headline(Status and Interest)</label>
                    <select id="statsu" name="headline_status">
                        
                        <option value="I want to get hired" selected>I want to get hired</option>
                        <option value="I want to hire">I want to hire</option>
                        <option value="I want to build a team">I want to build a team</option>
                        <option value="I want to learn">I want to learn</option>
                    </select>
                    <input type="text" name="headline_interest" id="headline_interest">
                </p>
                <p>
                    <label class="required">Payment Address
                        <a href="https://medium.com/nebulasio/creating-a-nas-wallet-9d01b5fa2df6" target="_blank">(NAS Wallet starting with "n1")
                        </a>
                    </label>
                    <input type="text" name="paymentAddress" id="paymentAddress">
                </p>

            </div>

            <div class="form-inputs clearfix">

            </div>
            <p class="form-submit">
                <input type="submit" value="Update Profile" class="button color small submit">
            </p>
        </form>
        <div class="clearfix"></div>
    </div>
</div>


<script type="text/javascript">


    function checkPaymentAddress() {
        // userID = '<%= session.user_id%>';

        url = "/checkDuplicatePayment";
        var status;
        var paymentAddress = $("#paymentAddress").val();
        if (paymentAddress != "") {
            var firstCharacter = paymentAddress.substring(0, 2);
            if (firstCharacter != "n1") {
                alert("Invalid Payment Address")
                return false;
            }
            $.ajaxSetup({ 'async': false });
            $.ajax({
                type: 'POST',
                url: url,
                data: {
                    paymentAddress: paymentAddress,
                },
                async: false,
                success: function (data) {
                    if (data.sendingData == false){
                        
                        status = false;
                    }
                    else{
                        status = true;
                    }
                },
                error: function () {
                    alert('Error occured. Please try again.');
                    return false;
                }
            });
            $.ajaxSetup({ 'async': true });
            if (status == false){
                alert("Duplicate Payment Address");
                return false
            }   
            else
                return true;
        }
        else{
            return true;
        }

    }
    // var gMode = "select";
    // function selectMode(mode) {
    //     if (mode == "select") {
    //         $(".companyFields").hide();
    //         clear_form_elements('companyFields')
    //         $(".employerFields").show();
    //         gMode = "select"
    //     }
    //     else if (mode == "create") {
    //         $(".employerFields").hide();
    //         clear_form_elements('employerFields')
    //         $(".companyFields").show();
    //         gMode = "create"
    //     }
    // }

    // function clear_form_elements(class_name) {
    //     $("." + class_name).find(':input').each(function () {
    //         switch (this.type) {
    //             case 'password':
    //             case 'text':
    //             case 'textarea':
    //             case 'file':
    //             case 'select-one':
    //             case 'select-multiple':
    //             case 'date':
    //             case 'number':
    //             case 'tel':
    //             case 'email':
    //                 jQuery(this).val('');
    //                 break;
    //             case 'checkbox':
    //             case 'radio':
    //                 this.checked = false;
    //                 break;
    //         }
    //     });
    // }
    function getvaluesToRegisterUser() {
        var url = "/userRegister";
        // if (gMode == "select") {
        //     data = {
        //         'mode': gMode,
        //         'company_id': $("#employer").val(),
        //         'firstname': $("#firstName").val(),
        //         'lastname': $("#lastName").val(),
        //         'user_name': $("#userName").val(),
        //         'user_email': $("#userEmail").val(),
        //         'user_phone': $("#userPhone").val(),
        //         'password': $("#userPasswd").val(),
        //         'payment_address': $("#userPAddress").val(),
        //         'is_reviewer': $('input[name="is_reviewer"]:checked').val()
        //     };
        // }
        // else if (gMode == "create") {
        // if ($("#firstName").val() == "") {
        //     // alert("Please insert First Name");
        // } else if ($("#lastName").val() == "") {
        //     // alert("Please insert Last Name");
        // } else 
        if ($("#userName").val() == "") {
            // alert("Please insert User Name");
        } else if ($("#userEmail").val() == "") {
            // alert("Please insert User Email");
        } else if ($("#userPasswd").val() == "") {
            // alert("Please insert User Password");
        } else if ($("#userPasswd").val() != $("#confirmPassword").val()) {
            alert("Password do not match. Please check again.");
        } else {
            data = {
                // 'mode': gMode,
                // 'company_name': 0,
                // 'company_info': $("#companyInfo").val(),
                // 'company_email': $("#companyEmail").val(),
                // 'company_phone': $("#companyPhone").val(),
                // 'company_site': $("#companyweb").val(),
                // 'firstname': $("#firstName").val(),
                // 'lastname': $("#lastName").val(),
                'user_name': $("#userName").val(),
                'user_email': $("#userEmail").val(),
                'user_phone': 0,
                'password': $("#userPasswd").val(),
                // 'payment_address': $("#userPAddress").val(),
                'is_reviewer': 0
            };

            $.ajax({
                type: 'POST',
                url: url,
                data: data,
                async: false,
                success: function (data) {
                    if (data.msg == "duplicateUserEmail") {
                        alert("Email is duplicate.");
                    }
                    else if (data.msg == "duplicateUserName") {
                        alert("User Name is duplicate.");
                    }
                    else if (data.msg == "success") {
                        alert("User information saved successfully. You can login now.");
                        window.location.reload();
                    }

                },
                error: function () {
                    alert('An error occured. Please try again later or contact with us.');
                }
            });
        }

    }


</script>
<!-- End lost-password -->